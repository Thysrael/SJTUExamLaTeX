\documentclass[a4paper,12pt]{article}

% `fontset=none` means forbidden default the font setting
\usepackage[UTF8, fontset=none]{ctex} % cjk
\usepackage[margin=0.79in]{geometry} % layout
\usepackage{amsmath, amssymb} % math
\usepackage{fancyhdr} % head and footer
\usepackage{lastpage} % get total page number
\usepackage{xifthen} % enhanced if-else condition
\usepackage{multirow} % merge table item
\usepackage{tabularx} % enhanced table
\usepackage{afterpage} % add table at the second page
\usepackage{tabularray} % enhanced table 2
% \usepackage{pgffor} % for-loop
% \usepackage{totcount} % counter

% % register counter
% \regtotcounter{section}
% \newcounter{sectioncount}

% font setting
\setmainfont{Times New Roman}
\setmonofont{Consolas}
\setCJKmainfont{SimSun}
\setCJKsansfont{SimHei}
\setCJKmonofont{FangSong}
\setCJKfamilyfont {zhkai} {KaiTi}
\NewDocumentCommand \kaishu{}{\CJKfamily{zhkai}}
% get current semester
\newcommand{\currentsemester}{
  \ifnum\month<10 
    1
  \else
    2
  \fi
}

\newcommand{\school}{上海交通大学}
\newcommand{\papertype}{A}
\newcommand{\startyear}{\the\year}
\newcommand{\nextyear}{\the\numexpr\startyear+1\relax}
\newcommand{\semester}{\currentsemester}
\newcommand{\coursename}{操作系统}

% header and footer
\pagestyle{fancy}
\fancyhf{} % clear the default config
% header
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\headrule}{\hrule width\textwidth height\headrulewidth}
% footer
\fancyfoot[C]{
  \footnotesize
  \underline{\ \papertype\ } 卷 \space
  第 \underline{\ \thepage\ } 页 \space
  共 \underline{\ \pageref{LastPage}\ } 页
}


\begin{document}

% title
\begin{center}
  \zihao{4} \school 试卷（\underline{\papertype} 卷）\\
  \zihao{5} （\underline{\ \startyear\ } 至 \underline{\ \nextyear\ } 学年 第 \underline{\ \semester\ } 学期） \\
  \vspace{0.5cm}
  \zihao{5}
  \begin{tabularx}{0.9 \textwidth}{XXX}
    班级号：\underline{\hspace{0.15 \textwidth}} & 学号：\underline{\hspace{0.2 \textwidth}} & 姓名：\underline{\hspace{0.2 \textwidth}} \\
    \multicolumn{2}{l}{课程名称：\underline{\makebox[0.43 \textwidth][l]{\hfill \coursename \hfill}}} & 成绩：\underline{\hspace{0.2 \textwidth}} \\
  \end{tabularx}
\end{center}

% \setcounter{sectioncount}{\number\totvalue{section}}

% commitment
\afterpage{
  \noindent
  \begin{minipage}{0.22 \textwidth}
    \zihao{5}
    \kaishu \hspace{2em} \textbf{我承诺，我将严格遵守考试纪律。}
    \vspace{2.5em}
    
    承诺人：\underline{\hspace{0.5 \textwidth}} \\
    \vspace{1em}
  \end{minipage}
  \hfill
  \begin{minipage}{0.73\textwidth}
    \begin{tblr}{
      colspec = {|X[3,l]|X[c]|X[c]|X[c]|X[c]|X[c]|X[c]|X[c]|X[c]|X[c]|},
      rows = {ht=10mm},
      hlines,
      vlines,
      }
      \textbf{题号} & & & & & & & & & \\
      \textbf{得分} & & & & & & & & & \\
      \textbf{批阅人} & & & & & & & & & \\
    \end{tblr}
  \end{minipage}
}


% \foreach \i in {1,2,3,4,5,6,7,8,9} {
% \&
% \ifnum\i>\value{sectioncount} % 比较数值而非计数器
%   0 
% \else
%   \i
% \fi
% }

你好，世界。“花鸟鱼虫”好

printf("h")

this is good?, 'Duck' is not good

\verb|printf("h")|

\newpage

\section{第三节}
内容...

\section{第四节}
内容...

再见，世界。

This is good!

\verb|printf("b")|

\newpage

\section{第五节}
内容...

\section{第六节}
内容...

\verb|printf("b")|

\label{LastPage}
\end{document}
